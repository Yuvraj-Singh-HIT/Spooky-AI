import{S as yt,i as Et,s as kt,k as d,a as y,q as re,l as f,m as u,h,c as E,r as ne,J as ft,n,b as Ne,G as r,u as Oe,H as vt,K as me,y as Ae,L as pe,z as Me,A as Pe,M as gt,N as Ke,O as St,g as P,f as Ye,d as F,B as Ge,P as It,Q as Tt,v as et,w as Vt}from"../chunks/index.07784548.js";function Ct(i){let e,s,t,a,l,m,b,I,c=i[0]==="user"?"Me":"Bot",A,q,O,M,k,G;return{c(){e=d("div"),s=d("div"),t=d("div"),a=d("img"),b=y(),I=d("div"),A=re(c),q=y(),O=d("div"),M=re(i[1]),this.h()},l(C){e=f(C,"DIV",{class:!0});var v=u(e);s=f(v,"DIV",{class:!0});var x=u(s);t=f(x,"DIV",{class:!0});var D=u(t);a=f(D,"IMG",{src:!0,alt:!0}),D.forEach(h),x.forEach(h),b=E(v),I=f(v,"DIV",{class:!0});var w=u(I);A=ne(w,c),w.forEach(h),q=E(v),O=f(v,"DIV",{class:!0});var T=u(O);M=ne(T,i[1]),T.forEach(h),v.forEach(h),this.h()},h(){ft(a.src,l="https://ui-avatars.com/api/?name="+(i[0]==="user"?"Me":"B"))||n(a,"src",l),n(a,"alt",m=i[0]+" avatar"),n(t,"class","w-10 rounded-full"),n(s,"class","chat-image avatar"),n(I,"class","chat-header font-sans"),n(O,"class",k="chat-bubble "+(i[0]==="user"?"chat-bubble-primary":"chat-bubble-secondary")+" font-sans"),n(e,"class",G="chat "+(i[0]==="user"?"chat-end":"chat-start")+" justify-end font-sans")},m(C,v){Ne(C,e,v),r(e,s),r(s,t),r(t,a),r(e,b),r(e,I),r(I,A),r(e,q),r(e,O),r(O,M)},p(C,[v]){v&1&&!ft(a.src,l="https://ui-avatars.com/api/?name="+(C[0]==="user"?"Me":"B"))&&n(a,"src",l),v&1&&m!==(m=C[0]+" avatar")&&n(a,"alt",m),v&1&&c!==(c=C[0]==="user"?"Me":"Bot")&&Oe(A,c),v&2&&Oe(M,C[1]),v&1&&k!==(k="chat-bubble "+(C[0]==="user"?"chat-bubble-primary":"chat-bubble-secondary")+" font-sans")&&n(O,"class",k),v&1&&G!==(G="chat "+(C[0]==="user"?"chat-end":"chat-start")+" justify-end font-sans")&&n(e,"class",G)},i:vt,o:vt,d(C){C&&h(e)}}}function Dt(i,e,s){let{type:t}=e,{message:a}=e;return i.$$set=l=>{"type"in l&&s(0,t=l.type),"message"in l&&s(1,a=l.message)},[t,a]}class Re extends yt{constructor(e){super(),Et(this,e,Dt,Ct,kt,{type:0,message:1})}}var xt={};(function(i){var e=function(s,t){if(!(this instanceof e))return new e(s,t);this.INITIALIZING=-1,this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,this.url=s,t=t||{},this.headers=t.headers||{},this.payload=t.payload!==void 0?t.payload:"",this.method=t.method||this.payload&&"POST"||"GET",this.withCredentials=!!t.withCredentials,this.FIELD_SEPARATOR=":",this.listeners={},this.xhr=null,this.readyState=this.INITIALIZING,this.progress=0,this.chunk="",this.addEventListener=function(a,l){this.listeners[a]===void 0&&(this.listeners[a]=[]),this.listeners[a].indexOf(l)===-1&&this.listeners[a].push(l)},this.removeEventListener=function(a,l){if(this.listeners[a]!==void 0){var m=[];this.listeners[a].forEach(function(b){b!==l&&m.push(b)}),m.length===0?delete this.listeners[a]:this.listeners[a]=m}},this.dispatchEvent=function(a){if(!a)return!0;a.source=this;var l="on"+a.type;return this.hasOwnProperty(l)&&(this[l].call(this,a),a.defaultPrevented)?!1:this.listeners[a.type]?this.listeners[a.type].every(function(m){return m(a),!a.defaultPrevented}):!0},this._setReadyState=function(a){var l=new CustomEvent("readystatechange");l.readyState=a,this.readyState=a,this.dispatchEvent(l)},this._onStreamFailure=function(a){var l=new CustomEvent("error");l.data=a.currentTarget.response,this.dispatchEvent(l),this.close()},this._onStreamAbort=function(a){this.dispatchEvent(new CustomEvent("abort")),this.close()},this._onStreamProgress=function(a){if(this.xhr){if(this.xhr.status!==200){this._onStreamFailure(a);return}this.readyState==this.CONNECTING&&(this.dispatchEvent(new CustomEvent("open")),this._setReadyState(this.OPEN));var l=this.xhr.responseText.substring(this.progress);this.progress+=l.length,l.split(/(\r\n|\r|\n){2}/g).forEach((function(m){m.trim().length===0?(this.dispatchEvent(this._parseEventChunk(this.chunk.trim())),this.chunk=""):this.chunk+=m}).bind(this))}},this._onStreamLoaded=function(a){this._onStreamProgress(a),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk=""},this._parseEventChunk=function(a){if(!a||a.length===0)return null;var l={id:null,retry:null,data:"",event:"message"};a.split(/\n|\r\n|\r/).forEach((function(b){b=b.trimRight();var I=b.indexOf(this.FIELD_SEPARATOR);if(!(I<=0)){var c=b.substring(0,I);if(c in l){var A=b.substring(I+1).trimLeft();c==="data"?l[c]+=A:l[c]=A}}}).bind(this));var m=new CustomEvent(l.event);return m.data=l.data,m.id=l.id,m},this._checkStreamClosed=function(){this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE&&this._setReadyState(this.CLOSED)},this.stream=function(){this._setReadyState(this.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._checkStreamClosed.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(var a in this.headers)this.xhr.setRequestHeader(a,this.headers[a]);this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)},this.close=function(){this.readyState!==this.CLOSED&&(this.xhr.abort(),this.xhr=null,this._setReadyState(this.CLOSED))}};i.SSE=e})(xt);function mt(i,e,s){const t=i.slice();return t[16]=e[s],t}function Lt(i){let e;return{c(){e=me("path"),this.h()},l(s){e=pe(s,"path",{d:!0,class:!0}),u(e).forEach(h),this.h()},h(){n(e,"d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"),n(e,"class","svelte-khyhgx")},m(s,t){Ne(s,e,t)},d(s){s&&h(e)}}}function Ot(i){let e;return{c(){e=me("path"),this.h()},l(s){e=pe(s,"path",{d:!0,class:!0}),u(e).forEach(h),this.h()},h(){n(e,"d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"),n(e,"class","svelte-khyhgx")},m(s,t){Ne(s,e,t)},d(s){s&&h(e)}}}function pt(i){let e,s;return e=new Re({props:{type:i[16].role,message:i[16].content||""}}),{c(){Ae(e.$$.fragment)},l(t){Me(e.$$.fragment,t)},m(t,a){Pe(e,t,a),s=!0},p(t,a){const l={};a&8&&(l.type=t[16].role),a&8&&(l.message=t[16].content||""),e.$set(l)},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){Ge(e,t)}}}function bt(i){let e,s;return e=new Re({props:{type:"assistant",message:i[1]}}),{c(){Ae(e.$$.fragment)},l(t){Me(e.$$.fragment,t)},m(t,a){Pe(e,t,a),s=!0},p(t,a){const l={};a&2&&(l.message=t[1]),e.$set(l)},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){Ge(e,t)}}}function _t(i){let e,s;return e=new Re({props:{type:"assistant",message:"ðŸ”® The spirits are whispering..."}}),{c(){Ae(e.$$.fragment)},l(t){Me(e.$$.fragment,t)},m(t,a){Pe(e,t,a),s=!0},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){Ge(e,t)}}}function Nt(i){let e,s,t,a,l,m,b,I,c,A,q,O,M,k,G,C,v,x,D,w,T,Q,N,H,W,X,le,Be,qe,Z,R,j,He,ie,de=i[5]?"ðŸ”‡":"ðŸ”Š",be,_e,ye,ze,K,fe,Fe,oe,je,$e,Y,L,se,Je,Ee,ke,Ue,he,Qe,ce,$,B,We,J,ve=i[2]?"ðŸ”® Channeling...":"ðŸ‘» Summon",xe,we,z,Xe,tt;function st(o,p){return o[5]?Ot:Lt}let Se=st(i),U=Se(i);se=new Re({props:{type:"assistant",message:"ðŸ‘» Boo! Welcome to the haunted realm! What mysteries shall we explore together?"}});let ae=i[3],_=[];for(let o=0;o<ae.length;o+=1)_[o]=pt(mt(i,ae,o));const wt=o=>F(_[o],1,1,()=>{_[o]=null});let S=i[1]&&bt(i),V=i[2]&&!i[1]&&_t();return{c(){e=d("div"),s=d("div"),t=d("div"),a=y(),l=d("div"),m=y(),b=d("div"),I=y(),c=d("div"),A=y(),q=d("div"),O=y(),M=d("div"),k=d("div"),G=d("div"),C=y(),v=d("div"),x=d("div"),D=d("div"),w=me("svg"),T=me("path"),Q=y(),N=d("div"),H=d("h1"),W=re("ðŸ‘» Spooky AI"),X=y(),le=d("p"),Be=re("Haunted by Local Spirits"),qe=y(),Z=d("div"),R=d("button"),j=me("svg"),U.c(),He=y(),ie=d("span"),be=re(de),ze=y(),K=d("div"),fe=d("div"),Fe=y(),oe=d("span"),je=re("Haunting"),$e=y(),Y=d("div"),L=d("div"),Ae(se.$$.fragment),Je=y();for(let o=0;o<_.length;o+=1)_[o].c();Ee=y(),S&&S.c(),ke=y(),V&&V.c(),Ue=y(),he=d("div"),Qe=y(),ce=d("div"),$=d("form"),B=d("input"),We=y(),J=d("button"),xe=re(ve),this.h()},l(o){e=f(o,"DIV",{class:!0});var p=u(e);s=f(p,"DIV",{class:!0});var g=u(s);t=f(g,"DIV",{class:!0}),u(t).forEach(h),a=E(g),l=f(g,"DIV",{class:!0}),u(l).forEach(h),m=E(g),b=f(g,"DIV",{class:!0}),u(b).forEach(h),I=E(g),c=f(g,"DIV",{class:!0}),u(c).forEach(h),A=E(g),q=f(g,"DIV",{class:!0}),u(q).forEach(h),g.forEach(h),O=E(p),M=f(p,"DIV",{class:!0});var ge=u(M);k=f(ge,"DIV",{class:!0});var ee=u(k);G=f(ee,"DIV",{class:!0}),u(G).forEach(h),C=E(ee),v=f(ee,"DIV",{class:!0});var at=u(v);x=f(at,"DIV",{class:!0});var ue=u(x);D=f(ue,"DIV",{class:!0});var rt=u(D);w=pe(rt,"svg",{class:!0,fill:!0,viewBox:!0});var nt=u(w);T=pe(nt,"path",{d:!0,class:!0}),u(T).forEach(h),nt.forEach(h),rt.forEach(h),Q=E(ue),N=f(ue,"DIV",{class:!0});var Ie=u(N);H=f(Ie,"H1",{class:!0});var lt=u(H);W=ne(lt,"ðŸ‘» Spooky AI"),lt.forEach(h),X=E(Ie),le=f(Ie,"P",{class:!0});var it=u(le);Be=ne(it,"Haunted by Local Spirits"),it.forEach(h),Ie.forEach(h),qe=E(ue),Z=f(ue,"DIV",{class:!0});var Te=u(Z);R=f(Te,"BUTTON",{class:!0,title:!0});var Ve=u(R);j=pe(Ve,"svg",{class:!0,fill:!0,viewBox:!0});var ot=u(j);U.l(ot),ot.forEach(h),He=E(Ve),ie=f(Ve,"SPAN",{class:!0});var ht=u(ie);be=ne(ht,de),ht.forEach(h),Ve.forEach(h),ze=E(Te),K=f(Te,"DIV",{class:!0});var Ce=u(K);fe=f(Ce,"DIV",{class:!0}),u(fe).forEach(h),Fe=E(Ce),oe=f(Ce,"SPAN",{class:!0});var ct=u(oe);je=ne(ct,"Haunting"),ct.forEach(h),Ce.forEach(h),Te.forEach(h),ue.forEach(h),at.forEach(h),$e=E(ee),Y=f(ee,"DIV",{class:!0});var De=u(Y);L=f(De,"DIV",{class:!0});var te=u(L);Me(se.$$.fragment,te),Je=E(te);for(let Ze=0;Ze<_.length;Ze+=1)_[Ze].l(te);Ee=E(te),S&&S.l(te),ke=E(te),V&&V.l(te),te.forEach(h),Ue=E(De),he=f(De,"DIV",{class:!0}),u(he).forEach(h),De.forEach(h),Qe=E(ee),ce=f(ee,"DIV",{class:!0});var ut=u(ce);$=f(ut,"FORM",{class:!0});var Le=u($);B=f(Le,"INPUT",{type:!0,placeholder:!0,class:!0}),We=E(Le),J=f(Le,"BUTTON",{type:!0,class:!0});var dt=u(J);xe=ne(dt,ve),dt.forEach(h),Le.forEach(h),ut.forEach(h),ee.forEach(h),ge.forEach(h),p.forEach(h),this.h()},h(){n(t,"class","absolute top-20 left-10 w-4 h-4 bg-green-400 rounded-full opacity-60 animate-float-ghost shadow-lg shadow-green-400/50 svelte-khyhgx"),n(l,"class","absolute top-40 right-20 w-3 h-3 bg-blue-400 rounded-full opacity-40 animate-float-ghost-delayed shadow-lg shadow-blue-400/50 svelte-khyhgx"),n(b,"class","absolute bottom-40 left-1/4 w-5 h-5 bg-purple-400 rounded-full opacity-50 animate-float-ghost-slow shadow-lg shadow-purple-400/50 svelte-khyhgx"),n(c,"class","absolute top-60 right-1/3 w-2 h-2 bg-cyan-400 rounded-full opacity-70 animate-float-ghost shadow-lg shadow-cyan-400/50 svelte-khyhgx"),n(q,"class","absolute inset-0 bg-gradient-to-t from-transparent via-gray-800/20 to-transparent animate-fog svelte-khyhgx"),n(s,"class","absolute inset-0 svelte-khyhgx"),n(G,"class","absolute inset-0 rounded-2xl bg-gradient-to-r from-green-400/10 via-purple-400/10 to-green-400/10 animate-pulse svelte-khyhgx"),n(T,"d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"),n(T,"class","svelte-khyhgx"),n(w,"class","w-5 h-5 text-green-400 svelte-khyhgx"),n(w,"fill","currentColor"),n(w,"viewBox","0 0 24 24"),n(D,"class","w-10 h-10 bg-green-400/20 rounded-xl flex items-center justify-center border border-green-400/50 svelte-khyhgx"),n(H,"class","text-xl font-bold text-green-400 drop-shadow-lg font-sans svelte-khyhgx"),n(le,"class","text-green-200 text-sm font-sans svelte-khyhgx"),n(N,"class","svelte-khyhgx"),n(j,"class","w-4 h-4 text-green-400 svelte-khyhgx"),n(j,"fill","currentColor"),n(j,"viewBox","0 0 24 24"),n(ie,"class","text-green-400 text-xs font-sans svelte-khyhgx"),n(R,"class",_e="flex items-center space-x-2 bg-green-400/20 hover:bg-green-400/30 border border-green-400/50 rounded-lg px-3 py-1 transition-all duration-200 "+(i[5]?"animate-pulse shadow-lg shadow-green-400/30":"")+" svelte-khyhgx"),n(R,"title",ye=i[5]?"Turn off spooky ambient sound":"Turn on spooky ambient sound"),n(fe,"class","w-2 h-2 bg-green-400 rounded-full animate-pulse shadow-lg shadow-green-400/50 svelte-khyhgx"),n(oe,"class","text-green-400 text-sm font-medium font-sans svelte-khyhgx"),n(K,"class","flex items-center space-x-2 svelte-khyhgx"),n(Z,"class","ml-auto flex items-center space-x-4 svelte-khyhgx"),n(x,"class","flex items-center space-x-3 svelte-khyhgx"),n(v,"class","bg-gradient-to-r from-green-600/80 to-purple-600/80 rounded-t-2xl p-4 relative font-sans svelte-khyhgx"),n(L,"class","space-y-4 svelte-khyhgx"),n(he,"class","svelte-khyhgx"),n(Y,"class","h-[500px] p-4 overflow-y-auto bg-black/30 relative font-sans svelte-khyhgx"),n(B,"type","text"),n(B,"placeholder","Speak to the spirits..."),n(B,"class","flex-1 bg-black/30 border border-green-400/30 rounded-xl px-4 py-3 text-green-400 placeholder-green-400/60 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent focus:shadow-lg focus:shadow-green-400/20 font-sans svelte-khyhgx"),B.disabled=i[2],n(J,"type","submit"),J.disabled=we=i[2]||!i[0].trim(),n(J,"class","bg-gradient-to-r from-green-500 to-purple-600 hover:from-green-600 hover:to-purple-700 disabled:from-gray-600 disabled:to-gray-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 disabled:cursor-not-allowed border border-green-400/50 shadow-lg shadow-green-400/20 hover:shadow-green-400/40 font-sans svelte-khyhgx"),n($,"class","flex space-x-3 svelte-khyhgx"),n(ce,"class","p-4 border-t border-green-400/20 bg-black/20 rounded-b-2xl relative font-sans svelte-khyhgx"),n(k,"class","w-full max-w-4xl bg-black/40 backdrop-blur-sm rounded-2xl border border-green-400/30 shadow-2xl shadow-green-400/20 relative svelte-khyhgx"),n(M,"class","relative z-10 flex flex-col items-center justify-center min-h-screen p-4 svelte-khyhgx"),n(e,"class","min-h-screen bg-gradient-to-br from-gray-900 via-black to-purple-900 relative overflow-hidden font-sans svelte-khyhgx")},m(o,p){Ne(o,e,p),r(e,s),r(s,t),r(s,a),r(s,l),r(s,m),r(s,b),r(s,I),r(s,c),r(s,A),r(s,q),r(e,O),r(e,M),r(M,k),r(k,G),r(k,C),r(k,v),r(v,x),r(x,D),r(D,w),r(w,T),r(x,Q),r(x,N),r(N,H),r(H,W),r(N,X),r(N,le),r(le,Be),r(x,qe),r(x,Z),r(Z,R),r(R,j),U.m(j,null),r(R,He),r(R,ie),r(ie,be),r(Z,ze),r(Z,K),r(K,fe),r(K,Fe),r(K,oe),r(oe,je),r(k,$e),r(k,Y),r(Y,L),Pe(se,L,null),r(L,Je);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(L,null);r(L,Ee),S&&S.m(L,null),r(L,ke),V&&V.m(L,null),r(Y,Ue),r(Y,he),i[8](he),r(k,Qe),r(k,ce),r(ce,$),r($,B),gt(B,i[0]),r($,We),r($,J),r(J,xe),z=!0,Xe||(tt=[Ke(R,"click",i[6]),Ke(B,"input",i[9]),Ke($,"submit",St(i[7]))],Xe=!0)},p(o,[p]){if(Se!==(Se=st(o))&&(U.d(1),U=Se(o),U&&(U.c(),U.m(j,null))),(!z||p&32)&&de!==(de=o[5]?"ðŸ”‡":"ðŸ”Š")&&Oe(be,de),(!z||p&32&&_e!==(_e="flex items-center space-x-2 bg-green-400/20 hover:bg-green-400/30 border border-green-400/50 rounded-lg px-3 py-1 transition-all duration-200 "+(o[5]?"animate-pulse shadow-lg shadow-green-400/30":"")+" svelte-khyhgx"))&&n(R,"class",_e),(!z||p&32&&ye!==(ye=o[5]?"Turn off spooky ambient sound":"Turn on spooky ambient sound"))&&n(R,"title",ye),p&8){ae=o[3];let g;for(g=0;g<ae.length;g+=1){const ge=mt(o,ae,g);_[g]?(_[g].p(ge,p),P(_[g],1)):(_[g]=pt(ge),_[g].c(),P(_[g],1),_[g].m(L,Ee))}for(et(),g=ae.length;g<_.length;g+=1)wt(g);Ye()}o[1]?S?(S.p(o,p),p&2&&P(S,1)):(S=bt(o),S.c(),P(S,1),S.m(L,ke)):S&&(et(),F(S,1,1,()=>{S=null}),Ye()),o[2]&&!o[1]?V?p&6&&P(V,1):(V=_t(),V.c(),P(V,1),V.m(L,null)):V&&(et(),F(V,1,1,()=>{V=null}),Ye()),(!z||p&4)&&(B.disabled=o[2]),p&1&&B.value!==o[0]&&gt(B,o[0]),(!z||p&4)&&ve!==(ve=o[2]?"ðŸ”® Channeling...":"ðŸ‘» Summon")&&Oe(xe,ve),(!z||p&5&&we!==(we=o[2]||!o[0].trim()))&&(J.disabled=we)},i(o){if(!z){P(se.$$.fragment,o);for(let p=0;p<ae.length;p+=1)P(_[p]);P(S),P(V),z=!0}},o(o){F(se.$$.fragment,o),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)F(_[p]);F(S),F(V),z=!1},d(o){o&&h(e),U.d(),Ge(se),It(_,o),S&&S.d(),V&&V.d(),i[8](null),Xe=!1,Tt(tt)}}}function At(i,e,s){let t="",a="",l=!1,m=[],b,I=!1,c=null;function A(){c||(c=new(window.AudioContext||window.webkitAudioContext));const v=[],x=[],D=c.createOscillator(),w=c.createGain();D.connect(w),w.connect(c.destination),D.frequency.setValueAtTime(40,c.currentTime),D.type="sawtooth",w.gain.setValueAtTime(.05,c.currentTime);const T=c.createOscillator(),Q=c.createGain();T.connect(Q),Q.connect(c.destination),T.frequency.setValueAtTime(120,c.currentTime),T.type="triangle",Q.gain.setValueAtTime(.03,c.currentTime);const N=c.createOscillator(),H=c.createGain();N.connect(H),H.connect(c.destination),N.frequency.setValueAtTime(800,c.currentTime),N.type="sine",H.gain.setValueAtTime(.02,c.currentTime);const W=c.createOscillator(),X=c.createGain();return W.connect(X),X.connect(T.frequency),W.frequency.setValueAtTime(.1,c.currentTime),X.gain.setValueAtTime(10,c.currentTime),D.start(),T.start(),N.start(),W.start(),v.push(D,T,N,W),x.push(w,Q,H,X),{oscillators:v,gainNodes:x}}function q(){I?(c&&(c.close(),c=null),s(5,I=!1)):(s(5,I=!0),A())}function O(){setTimeout(function(){b==null||b.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},100)}const M=async()=>{if(!t.trim()||l)return;const v=t.trim();s(0,t=""),s(2,l=!0),s(3,m=[...m,{role:"user",content:v}]);const x=new xt.SSE("/api/chat",{headers:{"Content-Type":"application/json"},payload:JSON.stringify({messages:m})});x.addEventListener("error",k),x.addEventListener("message",D=>{O();try{if(D.data==="[DONE]"){s(3,m=[...m,{role:"assistant",content:a}]),s(1,a=""),s(2,l=!1);return}const w=JSON.parse(D.data),[{delta:T}]=w.choices;T.content&&s(1,a=(a??"")+T.content)}catch(w){k(w)}}),x.stream(),O()};function k(v){s(2,l=!1),s(0,t=""),s(1,a=""),console.error(v)}function G(v){Vt[v?"unshift":"push"](()=>{b=v,s(4,b)})}function C(){t=this.value,s(0,t)}return[t,a,l,m,b,I,q,M,G,C]}class Pt extends yt{constructor(e){super(),Et(this,e,At,Nt,kt,{})}}export{Pt as component};
